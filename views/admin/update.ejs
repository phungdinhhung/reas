<div class="upload">
   <div class="row">
      <div class="col-md-12">
         <form action="/dashboard/update/<%= apartment.id %>" method="POST" enctype="multipart/form-data">
            <div class="card mb-3">
               <div class="card-header">
                  <h4>Cập nhật căn hộ</h4>
               </div>
               <div class="card-body">
                  <h4 style="margin-top: 10px">Khu Vực</h4>
                  <div class="form-group">
                     <h6>Miền</h6>
                     <select name="region" id="" class="form-control">
                        <option value="" disabled hidden selected><%= apartment.region%></option>
                        <option value="Miền Bắc">Miền Bắc</option>
                        <option value="Miền Trung">Miền Trung</option>
                        <option value="Miền Nam">Miền Nam</option>
                     </select>
                     <div class="form-group mt-2" id="select-city">
                        <h6 for="">Thành phố</h6>
                        <input
                           type="Thành phố"
                           name="city"
                           placeholder="Thành phố"
                           id=""
                           class="form-control"
                           value="<%= apartment.city %>"
                        />
                     </div>
                     <div class="form-group mt-2" id="select-district">
                        <h6 for="">Quận / Huyện</h6>
                        <input
                           class="form-control"
                           type=""
                           name="district"
                           placeholder="Quận/Huyện"
                           value="<%= apartment.district %>"
                        />
                     </div>
                     <div class="form-group mt-2" id="select-ward">
                        <h6 for="">Phường / Xã</h6>
                        <input
                           class="form-control"
                           type=""
                           name="ward"
                           placeholder="Phường/Xã"
                           value="<%= apartment.ward %>"
                        />
                     </div>
                     <div class="form-group mt-2" id="select-beach">
                        <h6 for="">Bãi biển</h6>
                        <input
                           class="form-control"
                           type=""
                           name="beach"
                           placeholder="Bãi biển"
                           value="<%= apartment.beach %>"
                        />
                     </div>
                  </div>
                  <div class="form-group mt-2">
                     <h6 for="">Số nhà</h6>
                     <input
                        type="Địa Chỉ"
                        name="address"
                        placeholder="Số nhà, tên đường"
                        value="<%= apartment.address %>"
                        class="form-control"
                     />
                  </div>
                  <div style="margin-top: 20px">
                     <h4 class="">Thông tin mô tả</h4>
                     <div class="form-group" style="padding-top: 10px">
                        <h6>Tiêu đề</h6>
                        <input
                           class="form-control"
                           type="Tiêu đề"
                           name="heading"
                           placeholder="Tiêu đề ngắn gọn, dễ hiểu, không dài quá 100 kí tự."
                           value="<%= apartment.heading %>"
                        />
                     </div>
                     <div class="form-group" style="padding-top: 10px">
                        <h6>Mô tả</h6>
                        <textarea
                           class="form-control"
                           type="Nội dung mô tả"
                           name="description"
                           placeholder="Nội dung mô tả phải có ít nhất 150 kí tự và không được dài quá 5000 kí tự."
                           rows="10"
                           cols="80"
                           style="font-size: 14px; border: 1px solid black; padding: 10px"
                        >
<%= apartment.description %></textarea
                        >
                     </div>
                     <div class="form-group">
                        <h6 style="padding-top: 10px">Giá căn hộ</h6>
                        <input
                           class="form-control"
                           type="number"
                           name="price"
                           placeholder="Nhập giá (đơn vị: VNĐ)"
                           id="price"
                           value="<%= apartment.price %>"
                        />
                     </div>
                     <div class="form-group">
                        <h6 style="padding-top: 10px">Diện tích căn hộ</h6>
                        <input
                           class="form-control"
                           type="Nhập diện tích"
                           name="acreage"
                           placeholder="Nhập diện tích (m2)"
                           value="<%= apartment.acreage %>"
                        />
                     </div>
                     <div class="form-group">
                        <h6 style="padding-top: 10px">Giá cho thuê phòng</h6>
                        <input
                           class="form-control"
                           type="number"
                           name="rentalRate"
                           placeholder="Nhập giá cho thuê"
                           value="<%= apartment.rentalRate %>"
                        />
                     </div>
                     <div class="form-group">
                        <h6 style="padding-top: 10px">Phần trăm chính sách chiết khấu thanh toán</h6>
                        <input
                           class="form-control"
                           type="number"
                           name="percentDiscount"
                           placeholder="Nhập phần trăm"
                           value="7"
                           id=""
                        />
                     </div>
                     <div class="form-group">
                        <h6 style="padding-top: 10px">Phần trăm các chiết khấu khác</h6>
                        <input
                           class="form-control"
                           type="number"
                           name="percentOther"
                           placeholder="Nhập phần trăm chiết khấu khác"
                           value="5"
                        />
                     </div>
                     <div class="form-group" id="show">
                        <h6 style="padding-top: 10px">Phần trăm đóng theo đợt</h6>
                        <% value = phases.length %>
                        <select id="selectBox" onchange="changeFunc(value);">
                           <option class="option" hidden selected><%= phases.length %></option>
                           <option class="option" value="1">1</option>
                           <option class="option" value="2">2</option>
                           <option class="option" value="3">3</option>
                           <option class="option" value="4">4</option>
                           <option class="option" value="5">5</option>
                           <option class="option" value="6">6</option>
                           <option class="option" value="7">7</option>
                           <option class="option" value="8">8</option>
                           <option class="option" value="9">9</option>
                           <option class="option" value="10">10</option>
                        </select>
                        <div class="show-option">
                           <%for(let i = 0; i < phases.length; i++) {%>
                           <div>Phần trăm của đợt <%= i + 1 %></div>
                           <input
                              class="form-control"
                              type="phần trăm"
                              name="phase"
                              id="list_dot"
                              value="<%= phases[i].percent %>"
                           />
                           <% } %>
                        </div>
                     </div>
                     <div class="form-group">
                        <h6 for="formFileMultiple" style="padding-top: 10px">Chọn ảnh phòng</h6>
                        <input class="form-control" name="files" type="file" id="formFileMultiple" multiple />
                     </div>
                  </div>
               </div>
               <div class="card-footer">
                  <div class="buttons-container form-group">
                     <button type="submit" value="" class="btn btn-primary font-size: 20px">Thay đổi</button>
                     <a href="/dashboard/viewApartment" type="button" value="" class="btn btn-danger font-size: 20px"
                        >Hủy bỏ</a
                     >
                  </div>
               </div>
            </div>
         </form>
      </div>
   </div>
</div>
<script>
   const $ = document.querySelector.bind(document);
   const $$ = document.querySelectorAll.bind(document);
   $('.sidebar-menu_upload').classList.add('active');

   function dele(value) {
      const deleelemeent = document.getElementById('list_dot');
      const buttonDele = document.getElementById('buttonDele');
      buttonDele.remove();
      deleelemeent.remove();
   }

   function deleOption() {
      var htmlObj = $('.show-option');
      htmlObj.innerHTML = '';
   }

   function changeFunc(value) {
      if (value) {
         deleOption();
      }
      var htmlObj = $('.show-option');
      for (let index = 0; index < Number(value); index++) {
         htmlObj.innerHTML =
            htmlObj.innerHTML +
            `<div> Phần trăm của đợt ${index + 1} </div>` +
            `<input class ='form-control' type='phần trăm' name='phase' placeholder='% ' id='list_dot'/> `;
      }
   }
</script>
